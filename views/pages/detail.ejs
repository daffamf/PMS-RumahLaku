<%- include('../partials/header') %>
    <style>
        .card {
            border-radius: 15px;
            box-shadow: 0 2px 4px 0 grey;
        }
    </style>
    <script>

    </script>

    <body>

        <div class="container">
            <div class="detail">
            </div>

            <br>
            <div id="googleMap" style="width:100%;height:380px;box-shadow: 0 12px 10px 0 rgba(0,0,0,.2); "></div><br>
            <hr>
        </div>

        <script type="text/javascript">
            let corX = []
            let corY = ''
            const API_URL = "http://localhost:3000/api/index";

            $(document).ready(function () {
                detailData()
            })
            const detailData = () => {
                let id = location.search.slice(1).split("&")[0].split("=")[1]
                $.ajax({
                    url: `${API_URL}/detail/${id}`,
                    method: 'GET',
                    dataType: 'json'
                }).done(function (data) {
                    let rows = data.data
                    let foto = rows.foto.split(',')
                    let deskripsi = rows.deskripsi
                    let html = `
                    <div class="card">
            <div class="card-body">
                <div class="card-image"> <img class="card-img-top"
                        src="/images/upload/${foto[0]}">
                </div>
                <p></p>
                <h5 class="card-title" style="color: rgb(0, 140, 255);">Rp. ${rows.harga}
                    <small class="negotiable">${rows.isNego ? "(Nego)" : "(Harga Pas)"}</small>
                </h5>
                <small class="text-muted">Deskripsi Rumah</small>
                <p class="card-text">${rows.deskripsi == null ? "Tidak Ada Deskripsinya" : rows.deskripsi}</p>
                <hr>
                <p class="card-text"><small class="text-muted" id="cor">${rows.coordinate.x}
                        ${rows.coordinate.y}</small></p>
            </div>
        </div>
        <hr>
        <div class="form-row" style="margin-top: 30px;">
            <div class="col-md-8 mb-3">
                <label for="validationTooltip01">Lokasi</label>
                <input type="text" class="form-control" id="validationTooltip01" placeholder="First name"
                    value="${rows.lokasi}" readonly>
            </div>
            <div class="col-md-4 mb-3">
                <label for="validationTooltipUsername">No. Telepon Pemilik</label>
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text" id="validationTooltipUsernamePrepend"><img
                                src="/images/icon/phone.svg" alt=""></span>
                    </div>
                    <input type="text" class="form-control" id="validationTooltipUsername" placeholder="Phone Number"
                        aria-describedby="validationTooltipUsernamePrepend" value="${rows.no_tlp}" readonly>
                </div>
            </div>
        </div>
        <div class="form-row">
            <div class="col-md-3 mb-3">
                <label for="validationTooltip04">Luas Tanah</label>
                <div class="input-group">
                    <input type="text" class="form-control" id="validationTooltip04" placeholder="Luas Tanah"
                        value="${rows.luastanah}" readonly>
                    <div class="input-group-prepend">
                        <span class="input-group-text" id="validationTooltipUsernamePrepend">m2</span>
                    </div>
                </div>
            </div>
            <div class="col-md-2 mb-3">
                <label for="validationTooltip05">Kamar Tidur</label>
                <div class="input-group">
                <input type="text" class="form-control aa" id="validationTooltip05" placeholder="Jumlah Kamar"
                    value="${rows.jml_kamar}" readonly>
                    <div class="input-group-prepend">
                        <span class="input-group-text" id="validationTooltipUsernamePrepend">Buah</span>
                    </div>
                </div>
            </div>
            <div class="col-md-2 mb-3">
                <label for="validationTooltip05">Kamar Mandi</label>
                <div class="input-group">
                <input type="text" class="form-control aa" id="validationTooltip05" placeholder="Jumlah Kamar"
                    value="${rows.kmr_mandi}" readonly>
                    <div class="input-group-prepend">
                        <span class="input-group-text" id="validationTooltipUsernamePrepend">Buah</span>
                    </div>
                </div>
            </div>
        </div>
        <hr>`
                    $('.detail').html(html)
                }).fail(function (jqXHR, textStatus) {
                    alert("Request Failed Get Data: " + textStatus);
                })
            }
            function initMap() {

                map = new google.maps.Map(document.getElementById("googleMap"), {
                    center: { lat: -6.923735, lng: 107.688739 },
                    zoom: 9,
                });
                var marker = new google.maps.Marker({
                    position: new google.maps.LatLng(-6.923735, 107.688739),
                    map: map
                });
                console.log(JSON.stringify(corX))
            }
            google.maps.event.addDomListener(window, 'load', initMap);



        </script>
        <%- include('../partials/footer') %>