<%- include('../partials/header') %>
    <style>
        .card {
            border-radius: 15px;
            box-shadow: 0 2px 4px 0 grey;
        }
    </style>

    <body>
        <nav class="navbar navbar-expand-md navbar-white fixed-top bg-white">
            <a class="navbar-brand" href="/">
                <img src="/images/danilla.svg" height="35" class="d-inline-block align-top" alt="">
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse"
                aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarCollapse">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item active">
                        <a class="nav-link" href="/">Home
                            <span class="sr-only">(current)</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Daftar Iklan</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" id="navbarDropdown" role="button" data-toggle="dropdown"
                            aria-haspopup="true" aria-expanded="false">
                            Dropdown
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdown" id="drp">
                            <a class="dropdown-item" href="#">Action</a>
                            <a class="dropdown-item" href="#">Another action</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" href="#">Something else here</a>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link disabled" href="#">Wilujeng Sumping</a>
                    </li>
            </div>
            <a class="nav-link" href="/signup"> Daftar</a>
            <div class="navbar__link-separator"
                style="border-right: 1px solid #777;height: .8125rem;margin-right: 5px;padding-right: 5px;"></div>
            <a class="nav-link" href="/signin"> Masuk</a>
        </nav><br><br><br>

        <div class="container">
            <div class="detail">
            </div>
            <script>
                function initialize() {
                    let propertiPeta = {
                        center: new google.maps.LatLng(-6.9592503, 108.2436478),
                        zoom: 9,
                        mapTypeId: google.maps.MapTypeId.ROADMAP
                    };

                    let peta = new google.maps.Map(document.getElementById("googleMap"), propertiPeta);
                    let marker = new google.maps.Marker({
                        position: new google.maps.LatLng(-6.9247657, 107.6859478), // longitude latitude
                        map: map,
                        title: 'Bandung'
                    })
                }
                // event jendela di-load  
                google.maps.event.addDomListener(window, 'load', initialize);

            </script>

            <br>
            <div id="googleMap" style="width:100%;height:380px;box-shadow: 0 12px 10px 0 rgba(0,0,0,.2); "></div><br>
            <hr>
        </div>

        <script type="text/javascript">
            const API_URL = "http://localhost:3000/api/index";

            $(document).ready(function () {
                detailData()
            })
            const detailData = () => {
                let id = location.search.slice(1).split("&")[0].split("=")[1]
                $.ajax({
                    url: `${API_URL}/detail/${id}`,
                    method: 'GET',
                    dataType: 'json'
                }).done(function (data) {
                    console.log(data)
                    let html = ``
                    data.forEach(item => {
                        html += `
                        <div class="card">
                    <div class="card-body">
                        <div class="card-image" style="width: 276px;height: 183px;"> <img class="card-img-top"
                                src="${item.foto}"></div>
                        <p></p>
                        <h5 class="card-title" style="color: rgb(0, 140, 255);">${item.harga}
                            <small class="negotiable">${item.isNego ? "(Nego)" : "(Harga Pas)"}</small>
                        </h5>
                        <p class="card-text">This is a longer card with supporting text below as a natural lead-in to
                            additional content. This content is a little bit longer.</p>
                        <hr>
                        <p class="card-text"><small class="text-muted">Last updated 3 mins ago</small></p>
                    </div>
                </div>
                <hr>
                <div class="form-row" style="margin-top: 30px;">
                    <div class="col-md-8 mb-3">
                        <label for="validationTooltip01">Lokasi</label>
                        <input type="text" class="form-control" id="validationTooltip01" placeholder="First name"
                            value="${item.lokasi}" readonly>
                    </div>
                    <div class="col-md-4 mb-3">
                        <label for="validationTooltipUsername">No. Telepon Pemilik</label>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text" id="validationTooltipUsernamePrepend"><img
                                        src="/images/phone.svg" alt=""></span>
                            </div>
                            <input type="text" class="form-control" id="validationTooltipUsername"
                                placeholder="Phone Number" aria-describedby="validationTooltipUsernamePrepend" value="${item.no_tlp}" readonly>
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="col-md-6 mb-3">
                        <label for="validationTooltip03">City</label>
                        <input type="text" class="form-control" id="validationTooltip03" placeholder="City" readonly>
                        <div class="invalid-tooltip">
                            Please provide a valid city.
                        </div>
                    </div>
                    <div class="col-md-3 mb-3">
                        <label for="validationTooltip04">Luas Tanah</label>
                        <input type="text" class="form-control" id="validationTooltip04" placeholder="Luas Tanah"
                            value="100 m2" readonly>
                    </div>
                    <div class="col-md-3 mb-3">
                        <label for="validationTooltip05">Jumlah Kamar</label>
                        <input type="text" class="form-control" id="validationTooltip05" placeholder="Jumlah Kamar" value="${item.jml_kamar}" readonly>
                        <div class="invalid-tooltip">
                            Please provide a valid zip.
                        </div>
                    </div>
                </div>
            </div>
        <hr> `
                    });
                    $('.detail').html(html)
                }).fail(function (jqXHR, textStatus) {
                    alert("Request Failed Get Data: " + textStatus);
                })
            }
        </script>
        <%- include('../partials/footer') %>